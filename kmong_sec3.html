<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <meta name="referrer" content="strict-origin-when-cross-origin">
    <title>강원 랜딩 페이지 - sec3 테스트</title>
    <!-- 폰트 프리로드 -->
    <link rel="preload" href="fonts/강원교육튼튼.otf" as="font" type="font/otf" crossorigin>
    <link rel="preload" href="fonts/강원교육튼튼.ttf" as="font" type="font/ttf" crossorigin>
    <link rel="stylesheet" href="css/style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Outfit:wght@500&family=Inter:wght@600;700&family=Pretendard:wght@400;600&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />
    <style>
        /* --- [새로 추가된 섹션 스타일 시작] --- */
        .sec3-new {
            position: relative;
            width: 100%;
            height: 100vh;
            background-color: #000;
            color: #fff;
            font-family: "Pretendard", sans-serif;
            overflow: hidden;
            /* 기존 CSS의 * { margin:0; padding:0 } 상속받음 */
        }

        /* 메인 무대 */
        .sec3-new .vision-stage {
            width: 100%;
            height: 100%;
            position: relative;
        }

        /* 배경 이미지 (경로 확인 필요) */
        .sec3-new .bg-initial {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url("../images/sec15_bg.png");
            /* 경로 수정 필요시 변경 */
            background-size: cover;
            background-position: center;
            opacity: 0.4;
            transform: scale(1.1);
            z-index: 1;
        }

        .sec3-new .bg-final {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url("../images/sec_vison_bg.png");
            /* 경로 수정 필요시 변경 */
            background-size: cover;
            background-position: center;
            opacity: 0;
            transform: scale(1);
            z-index: 2;
        }

        /* 화이트 플래시 */
        .sec3-new .flash-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: white;
            opacity: 0;
            z-index: 50;
            pointer-events: none;
        }

        /* 텍스트 그룹 */
        .sec3-new .intro-container {
            position: absolute;
            top: 45%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 100%;
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 30px;
            z-index: 15;
        }

        .sec3-new .intro-badge {
            display: inline-block;
            padding: 12px 40px;
            border: 1px solid rgba(255, 255, 255, 0.7);
            border-radius: 50px;
            font-size: 1.2rem;
            font-weight: 500;
            letter-spacing: 1px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(5px);
        }

        .sec3-new .intro-title {
            font-size: 5rem;
            font-weight: 700;
            line-height: 1.1;
            margin: 0;
            text-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);
        }

        .sec3-new .intro-desc {
            font-size: 1.8rem;
            color: #ccc;
            font-weight: 400;
            line-height: 1.6;
            margin: 0;
        }

        .sec3-new .intro-item {
            opacity: 0;
            transform: translateY(50px);
        }

        /* 캠퍼스 구슬 그룹 */
        .sec3-new .campus-group {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 20;
            pointer-events: none;
        }

        @keyframes floating-sec3-new {
            0% {
                transform: translateY(0px);
            }

            50% {
                transform: translateY(-20px);
            }

            100% {
                transform: translateY(0px);
            }
        }

        /* PC 기준: 150px */
        .sec3-new .orb-container {
            position: absolute;
            width: 150px;
            height: 150px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            animation: floating-sec3-new 3.5s ease-in-out infinite;
        }

        /* 초기 위치 (PC) - 중앙 정렬 계산을 위해 calc 사용 */
        .sec3-new .c1 {
            top: 15%;
            left: 15%;
        }

        .sec3-new .c2 {
            top: 15%;
            left: calc(85% - 150px);
        }

        .sec3-new .c3 {
            top: 75%;
            left: 15%;
        }

        .sec3-new .c4 {
            top: 75%;
            left: calc(85% - 150px);
        }

        .sec3-new .orb {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background-color: transparent;
            border: 2px solid rgba(255, 255, 255, 0.8);
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.6);
            overflow: hidden;
            opacity: 0;
        }

        .sec3-new .orb-bg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-size: cover;
            background-position: center;
        }

        /* 이미지 경로 (기존 CSS와 경로 패턴 맞춤) */
        .sec3-new .c1 .orb-bg {
            background-image: url("../images/campus_춘천.png");
        }

        .sec3-new .c2 .orb-bg {
            background-image: url("../images/campus_강릉.png");
        }

        .sec3-new .c3 .orb-bg {
            background-image: url("../images/campus_원주.png");
        }

        .sec3-new .c4 .orb-bg {
            background-image: url("../images/campus_삼척.png");
        }

        .sec3-new .orb-label {
            position: absolute;
            top: 160px;
            width: 200px;
            text-align: center;
            color: white;
            font-size: 1rem;
            font-weight: 500;
            opacity: 0;
            text-shadow: 0 0 5px rgba(0, 0, 0, 0.8);
        }

        /* 최종 텍스트 */
        .sec3-new .final-message {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.8);
            z-index: 16;
            text-align: center;
            width: 100%;
            opacity: 0;
        }

        .sec3-new .final-message h1 {
            font-size: 3rem;
            margin-bottom: 20px;
            text-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
        }

        .sec3-new .final-message p {
            font-size: 1.5rem;
            color: #ddd;
        }

        /* [모바일 반응형] 768px 이하 */
        @media (max-width: 768px) {
            .sec3-new .intro-title {
                font-size: 3rem;
            }

            .sec3-new .intro-desc {
                font-size: 1.2rem;
            }

            .sec3-new .intro-badge {
                padding: 10px 25px;
                font-size: 1rem;
            }

            /* 구슬 크기 90px로 축소 */
            .sec3-new .orb-container {
                width: 90px;
                height: 90px;
            }

            .sec3-new .orb-label {
                top: 100px;
                font-size: 0.9rem;
            }

            /* 모바일용 초기 좌표 재조정 */
            .sec3-new .c2 {
                left: calc(85% - 90px);
            }

            .sec3-new .c4 {
                left: calc(85% - 90px);
            }

            .sec3-new .final-message h1 {
                font-size: 2rem;
            }

            .sec3-new .final-message p {
                font-size: 1.1rem;
            }
        }

        /* --- [새로 추가된 섹션 스타일 끝] --- */
    </style>
    <script src="https://code.jquery.com/jquery-3.7.1.js"
        integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4=" crossorigin="anonymous"></script>
</head>

<body>
    <!-- 메인 컨텐츠 -->
    <main>
        <section class="sec3-new">
            <div class="vision-stage">
                <div class="bg-initial"></div>
                <div class="bg-final"></div>
                <div class="flash-overlay"></div>

                <div class="intro-container">
                    <div class="intro-item intro-badge">강원 1도 1국립대학</div>
                    <h2 class="intro-item intro-title">위대한 도약</h2>
                    <p class="intro-item intro-desc">4개 캠퍼스의 시너지가 모여<br>글로컬 대학도시를 구현합니다</p>
                </div>

                <div class="campus-group">
                    <div class="orb-container c1">
                        <div class="orb">
                            <div class="orb-bg"></div>
                        </div>
                        <div class="orb-label">춘천 캠퍼스</div>
                    </div>
                    <div class="orb-container c2">
                        <div class="orb">
                            <div class="orb-bg"></div>
                        </div>
                        <div class="orb-label">강릉 캠퍼스</div>
                    </div>
                    <div class="orb-container c3">
                        <div class="orb">
                            <div class="orb-bg"></div>
                        </div>
                        <div class="orb-label">원주 캠퍼스</div>
                    </div>
                    <div class="orb-container c4">
                        <div class="orb">
                            <div class="orb-bg"></div>
                        </div>
                        <div class="orb-label">삼척 캠퍼스</div>
                    </div>
                </div>

                <div class="final-message">
                    <h1>통합 강원대학교</h1>
                    <p>지역 혁신 생태계의 시작</p>
                </div>
            </div>
        </section>
    </main>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <script src="https://unpkg.com/aos@next/dist/aos.js"></script>
    <script>
        AOS.init();
    </script>
    <script src="js/script.js"></script>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            // GSAP 플러그인 등록 (한 번만 등록되어 있으면 생략 가능)
            gsap.registerPlugin(ScrollTrigger);

            let mm = gsap.matchMedia();

            // 반응형 로직 실행
            mm.add(
                {
                    isDesktop: "(min-width: 769px)",
                    isMobile: "(max-width: 768px)",
                },
                (context) => {
                    let { isDesktop } = context.conditions;

                    // 구슬 크기에 따른 중앙 보정값 계산
                    let orbSize = isDesktop ? 150 : 90;
                    let offset = orbSize / 2;

                    // 타임라인 설정 (.sec3-new 전용)
                    const tl = gsap.timeline({
                        scrollTrigger: {
                            trigger: ".sec3-new", // 새로 만든 클래스 트리거
                            start: "top top",
                            end: "+=5000", // 애니메이션 길이
                            pin: true,
                            scrub: 1,
                            anticipatePin: 1,
                        },
                    });

                    // 애니메이션 시퀀스
                    tl.to(".sec3-new .intro-item", {
                        y: 0,
                        opacity: 1,
                        duration: 3,
                        stagger: 1,
                        ease: "power2.out",
                    })
                        .to(".sec3-new .orb", { opacity: 1, duration: 2 }, "<")
                        .to(".sec3-new .orb-label", { opacity: 1, duration: 2 }, "<")

                        .to(".sec3-new .orb-label", { opacity: 0, duration: 1 })
                        .call(() => {
                            // 둥둥 떠다니는 애니메이션 일시 정지
                            document
                                .querySelectorAll(".sec3-new .orb-container")
                                .forEach((el) => (el.style.animationPlayState = "paused"));
                        })

                        // [중앙 정렬]
                        .to(".sec3-new .orb-container", {
                            top: `calc(50% - ${offset}px)`,
                            left: `calc(50% - ${offset}px)`,
                            scale: 0.5,
                            duration: 5,
                            ease: "power2.inOut",
                        })

                        .addLabel("turnWhite")
                        .to(
                            ".sec3-new .orb-bg",
                            { opacity: 0, duration: 2, ease: "power2.in" },
                            "turnWhite"
                        )
                        .to(
                            ".sec3-new .orb",
                            {
                                backgroundColor: "#fff",
                                border: "none",
                                filter: `blur(${isDesktop ? 20 : 10}px)`,
                                boxShadow: isDesktop
                                    ? "0px 0px 150px 50px white"
                                    : "0px 0px 80px 30px white",
                                duration: 2,
                                ease: "power2.in",
                            },
                            "turnWhite"
                        )

                        .to(".sec3-new .flash-overlay", {
                            opacity: 1,
                            duration: 1,
                            ease: "power2.in",
                        })

                        // 배경 교체
                        .set(".sec3-new .intro-container", { opacity: 0 })
                        .set(".sec3-new .orb-container", { opacity: 0 })
                        .set(".sec3-new .bg-initial", { opacity: 0 })
                        .set(".sec3-new .bg-final", { opacity: 1 })

                        .to(".sec3-new .flash-overlay", {
                            opacity: 0,
                            duration: 3,
                            ease: "power2.out",
                        })
                        .to(
                            ".sec3-new .final-message",
                            {
                                opacity: 1,
                                scale: 1,
                                y: 0,
                                duration: 3,
                                ease: "back.out(1.7)",
                            },
                            "-=2.5"
                        );

                    // 역재생 시 애니메이션 복구
                    tl.eventCallback("onReverseComplete", () => {
                        document
                            .querySelectorAll(".sec3-new .orb-container")
                            .forEach((el) => (el.style.animationPlayState = "running"));
                    });
                }
            );
        });

    </script>
</body>

</html>